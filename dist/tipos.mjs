function t(t){var n=0,a="",r=[],i="",e=[],o=0,u=0;t+=" ";for(var c=0;c<t.length;c++){var v=t[c];switch(v){case"'":n&&(o?o--:o++),a+=v;break;case'"':n&&(u?u--:u++),a+=v;break;case"(":if(o||u){a+=v;continue}n?a+=v:(i=a,a=""),n++;break;case")":if(o||u){a+=v;continue}--n?a+=v:(e.push(a),a=i);break;case",":1===n?(e.push(a),a=""):a+=v;break;case" ":case"\n":if(!a)continue;n?a+=v:(r.push({fun:a,args:e.map(function(t){var n=t.match(/^(')(.+)(')$/);return(n=n||t.match(/^(")(.+)(")$/))?n[2]:JSON.parse(t)})}),a="",e=[]);break;default:a+=v}}return r}function n(a,r,i){for(var e in void 0===i&&(i={}),a){var o=a[e];switch(typeof o){case"string":i[e]=t(o).map(function(t){var n=t.args,a=t.fun.match(/([^\?]+)(\?){0,1}/),i=a[1],e=a[2];return e="?"===e,function(t,a){var o=r[i].apply(r,[t,a].concat(n));return o.valid?o:Object.assign({},o,{optional:e,method:o.method||i})}}).concat(function(t){return{valid:!0,data:t}}).reduceRight(function(t,n){return function(a){return n?n(t,a):a}});break;case"object":n(a[e],r,i[e]={})}}return function(t){return function t(n,a,r){void 0===a&&(a={});var i={},e={},o={valid:0,invalid:0};for(var u in n){var c=(r?r+".":"")+u;if("object"==typeof n[u]){var v=t(n[u],a[u],c);if(o.valid+=v.count.valid,o.invalid+=v.count.invalid,v.count.valid&&(i[u]=v.valid),v.count.invalid)for(var d in v.invalid)v.optional||(e[d]=v.invalid[d])}else{var l=n[u](a[u]);if(l.valid)i[u]=l.data,o.valid++;else{if(l.optional)continue;e[c]=l,o.invalid++}}}return{valid:i,invalid:e,count:o}}(i,t)}}var r=function(){};r.prototype.type=function(t,n,a,r){var i={}.toString.call(n).match(/ ([^\]]+)/)||[],e=i[1];return void 0===e&&(e=""),e.toLowerCase()===a?t(n):{valid:!1,data:n}},r.prototype.equal=function(t,n,a){return a===n?t(n):{valid:!1,data:n}},r.prototype.minLength=function(t,n,a){return n.length>=a?t(n):{valid:!1,data:n}},r.prototype.maxLength=function(t,n,a){return n.length<=a?t(n):{valid:!1,data:n}},r.prototype.default=function(t,n,a){return t(void 0!==n?n:a)},r.prototype.min=function(t,n,a){return n>=a?t(n):{valid:!1,data:n}},r.prototype.max=function(t,n,a){return n<=a?t(n):{valid:!1,data:n}},r.prototype.not=function(t,n,a){return a!==n?t(n):{valid:!1,data:n}},r.prototype.option=function(t,n){for(var a=[],r=arguments.length-2;r-- >0;)a[r]=arguments[r+2];return a.indexOf(n)>-1?t(n):{valid:!1,data:n}};export default function(t){var a=new r,i=n(t,a);return i.types=a,i};
//# sourceMappingURL=tipos.mjs.map
